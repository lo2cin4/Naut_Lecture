<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>æ¨¡çµ„ 08ï¼šåŸ·è¡Œå¼•æ“ â€” NautilusTrader æ•™æ</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=Noto+Sans+TC:wght@300;400;500;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet"/>
<link href="../assets/style.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>
<body>
<!-- Language Toggle -->
<style>
.lang-toggle {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    background: rgba(43, 48, 59, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 6px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    text-decoration: none;
    color: var(--text-secondary, #A0AEC0);
    font-size: 0.9rem;
    font-weight: 500;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
.lang-toggle:hover {
    background: rgba(60, 65, 75, 0.9);
    color: var(--text-primary, #F7FAFC);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}
.lang-toggle span.active {
    color: #64ffda;
    font-weight: 600;
}
.lang-toggle svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
}
</style>
<a class="lang-toggle" href="../en/Module_08_ExecutionEngine/index.html" title="Switch to English">
<svg viewbox="0 0 24 24"><path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>
<span>EN / <span class="active">ä¸­</span></span>
</a>

<!-- Language Toggle -->


<div class="page-wrapper">
<nav class="sidebar">
<div class="sidebar-header">
<div class="sidebar-logo"><span class="icon">ğŸš</span> NautilusTrader æ•™æ</div>
</div>
<div class="sidebar-nav">
<div class="nav-section">
<div class="nav-section-title">ç¬¬é›¶éšæ®µï¼šèµ·æ­¥</div>
</div>
<a class="nav-item" href="../Module_00_Getting_Started/index.html"><span class="nav-num">00</span>
                    ç’°å¢ƒå®‰è£</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬ä¸€éšæ®µï¼šå…¨å±€èªè­˜</div>
</div>
<a class="nav-item" href="../Module_01_Why_NautilusTrader/index.html"><span class="nav-num">01</span>
                    ç‚ºä»€éº¼é¸æ“‡</a>
<a class="nav-item" href="../Module_02_Architecture_Overview/index.html"><span class="nav-num">02</span>
                    æ•´é«”æ¶æ§‹</a>
<a class="nav-item" href="../Module_03_Design_Philosophy/index.html"><span class="nav-num">03</span>
                    è¨­è¨ˆå“²å­¸</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬äºŒéšæ®µï¼šæ ¸å¿ƒçµ„ä»¶</div>
</div>
<a class="nav-item" href="../Module_04_Domain_Model/index.html"><span class="nav-num">04</span> é ˜åŸŸæ¨¡å‹</a>
<a class="nav-item" href="../Module_05_MessageBus/index.html"><span class="nav-num">05</span> æ¶ˆæ¯ç¸½ç·š</a>
<a class="nav-item" href="../Module_05B_Data_Management/index.html"><span class="nav-num">05B</span>
                    æ•¸æ“šç®¡ç†</a>
<a class="nav-item" href="../Module_06_Cache/index.html"><span class="nav-num">06</span> ç·©å­˜ç³»çµ±</a>
<a class="nav-item" href="../Module_07_DataEngine/index.html"><span class="nav-num">07</span> æ•¸æ“šå¼•æ“</a>
<a class="nav-item active" href="index.html"><span class="nav-num">08</span> åŸ·è¡Œå¼•æ“</a>
<a class="nav-item" href="../Module_09_RiskEngine/index.html"><span class="nav-num">09</span> é¢¨æ§å¼•æ“</a>
<a class="nav-item" href="../Module_10_Portfolio/index.html"><span class="nav-num">10</span> æŠ•è³‡çµ„åˆ</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬ä¸‰éšæ®µï¼šå¯¦æˆ°æ‡‰ç”¨</div>
</div>
<a class="nav-item" href="../Module_11_Strategy_Development/index.html"><span class="nav-num">11</span>
                    ç­–ç•¥é–‹ç™¼</a>
<a class="nav-item" href="../Module_12_Backtest_And_Live/index.html"><span class="nav-num">12</span>
                    å›æ¸¬èˆ‡å¯¦ç›¤</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬å››éšæ®µï¼šé€²éšæ“´å±•</div>
</div>
<a class="nav-item" href="../Module_13_Adapters_Extensions/index.html"><span class="nav-num">13</span>
                    é©é…å™¨èˆ‡æ“´å±•</a>
<a class="nav-item" href="../Module_14_Configuration/index.html"><span class="nav-num">14</span>
                    é…ç½®ç³»çµ±æ·±æ½›</a>
<a class="nav-item" href="../Module_15_Live_Advanced/index.html"><span class="nav-num">15</span>
                    å¯¦ç›¤éƒ¨ç½²é€²éš</a>
<a class="nav-item" href="../Module_16_Accounting_Risk/index.html"><span class="nav-num">16</span>
                    æœƒè¨ˆèˆ‡é¢¨æ§</a>
<a class="nav-item" href="../Module_17_Advanced_Topics/index.html"><span class="nav-num">17</span>
                    é€²éšä¸»é¡Œ</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬äº”éšæ®µï¼šå‹•æ‰‹ Lab</div>
</div>
<a class="nav-item" href="../Lab_01_Backtest_Workflow/index.html"><span class="nav-num">L1</span> Lab
                    01</a>
<a class="nav-item" href="../Lab_02_Binance_Sandbox/index.html"><span class="nav-num">L2</span> Lab
                    02</a>
<a class="nav-item" href="../Lab_03_Custom_Strategy/index.html"><span class="nav-num">L3</span> Lab
                    03</a>
</div>
</nav>
<div class="main-content">
<div class="top-bar">
<button aria-label="é–‹å•Ÿé¸å–®" class="menu-toggle">â˜°</button>
<div class="breadcrumb"><a href="../index.html">é¦–é </a><span class="separator">â€º</span>ç¬¬äºŒéšæ®µ<span class="separator">â€º</span>æ¨¡çµ„ 08</div>
</div>
<div class="content-container">
<span class="phase-label phase-2">ç¬¬äºŒéšæ®µï¼šæ ¸å¿ƒçµ„ä»¶æ·±åº¦è§£è®€</span>
<h1>æ¨¡çµ„ 08ï¼šåŸ·è¡Œå¼•æ“ â€” è¨‚å–®çš„ä¸€ç”Ÿ<span class="subtitle">å¾ä½ ä¸‹é”æŒ‡ä»¤åˆ°æ”¶åˆ°æˆäº¤å›å ±çš„å®Œæ•´æ—…ç¨‹</span></h1>
<h2>ä¸€ã€åŸ·è¡Œå¼•æ“çš„è§’è‰²</h2>
<p>åŸ·è¡Œå¼•æ“æ˜¯è¨‚å–®ç®¡ç†çš„<strong>ä¸­å¤®æ§åˆ¶å¡”</strong>ã€‚å®ƒä¸ç›´æ¥å’Œäº¤æ˜“æ‰€é€šè¨Šï¼Œè€Œæ˜¯é€é ExecutionClient é©é…å™¨ä¾†æ“ä½œã€‚</p>
<div class="mermaid-wrapper">
<div class="mermaid">
                        flowchart LR
                        subgraph input["ğŸ“ å‘½ä»¤è¼¸å…¥"]
                        direction TB
                        submit["SubmitOrder"]
                        cancel["CancelOrder"]
                        modify["ModifyOrder"]
                        end

                        ee["âš™ï¸ ExecutionEngine<br/>åŸ·è¡Œå¼•æ“ä¸­å¿ƒ"]

                        subgraph output["âš¡ äº‹ä»¶è¼¸å‡º"]
                        direction TB
                        accepted["OrderAccepted"]
                        filled["OrderFilled"]
                        rejected["OrderRejected"]
                        end

                        subgraph adapt["ğŸ”Œ é©é…å™¨èˆ‡äº¤æ˜“æ‰€"]
                        direction TB
                        binance["Binance Client"]
                        ib["IB Client"]
                        sim["Simulator"]
                        end

                        input ==&gt; ee
                        ee ==&gt; adapt
                        adapt ==&gt; ee
                        ee ==&gt; output

                        style ee fill:#0f1419,stroke:#4fc3f7,stroke-width:2px
                        style input fill:#0f1419,stroke:#ab47bc,stroke-width:1px
                        style output fill:#0f1419,stroke:#ef5350,stroke-width:1px
                    </div>
<div class="caption">åœ– 1ï¼šåŸ·è¡Œå¼•æ“æ¥æ”¶å‘½ä»¤ã€è·¯ç”±åˆ°äº¤æ˜“æ‰€ã€å›å ±äº‹ä»¶</div>
</div>
<h2>äºŒã€è¨‚å–®çš„å®Œæ•´ç”Ÿå‘½é€±æœŸ</h2>
<div class="mermaid-wrapper">
<div class="mermaid">
                        sequenceDiagram
                        participant S as ğŸ¯ ç­–ç•¥
                        participant RE as ğŸ›¡ï¸ RiskEngine
                        participant EE as âš™ï¸ ExecutionEngine
                        participant EC as ğŸ”Œ ExecutionClient
                        participant EX as ğŸ¦ äº¤æ˜“æ‰€
                        participant Cache as ğŸ’¾ Cache
                        participant Port as ğŸ’° Portfolio

                        S-&gt;&gt;RE: SubmitOrder(å¸‚åƒ¹è²·å…¥ 1 BTC)
                        Note over RE: é¢¨æ§æª¢æŸ¥é€šé âœ…
                        RE-&gt;&gt;EE: è½‰ç™¼å‘½ä»¤
                        EE-&gt;&gt;EE: ç”Ÿæˆ OrderSubmitted äº‹ä»¶
                        EE-&gt;&gt;Cache: æ›´æ–°ç‹€æ…‹ â†’ SUBMITTED
                        EE-&gt;&gt;EC: è·¯ç”±åˆ° Binance é©é…å™¨
                        EC-&gt;&gt;EX: REST API ä¸‹å–®

                        EX--&gt;&gt;EC: è¨‚å–®æ¥å—ç¢ºèª
                        EC-&gt;&gt;EE: OrderAccepted äº‹ä»¶
                        EE-&gt;&gt;Cache: æ›´æ–°ç‹€æ…‹ â†’ ACCEPTED

                        EX--&gt;&gt;EC: æˆäº¤å›å ±
                        EC-&gt;&gt;EE: OrderFilled äº‹ä»¶
                        EE-&gt;&gt;Cache: æ›´æ–°ç‹€æ…‹ â†’ FILLED
                        EE-&gt;&gt;Port: æ›´æ–°æŒå€‰å’Œç›ˆè™§
                        EE-&gt;&gt;S: é€šçŸ¥æˆäº¤ï¼ˆé€é MessageBusï¼‰
                    </div>
<div class="caption">åœ– 2ï¼šè¨‚å–®å¾ç­–ç•¥åˆ°äº¤æ˜“æ‰€å†å›åˆ°ç­–ç•¥çš„å®Œæ•´æµç¨‹</div>
</div>
<h2>ä¸‰ã€è¨‚å–®å‘½ä»¤ API</h2>
<p>ä»¥ä¸‹æ˜¯ä½ åœ¨ç­–ç•¥ä¸­æœ€å¸¸ä½¿ç”¨çš„è¨‚å–®æ“ä½œï¼š</p>
<pre><code class="language-python"># å¸‚åƒ¹è¨‚å–® â€” ç«‹å³åŸ·è¡Œ
order = self.order_factory.market(
    instrument_id=btc_usdt_id,
    order_side=OrderSide.BUY,
    quantity=Quantity.from_str("0.01"),
)
self.submit_order(order)

# é™åƒ¹è¨‚å–® â€” æŒ‡å®šåƒ¹æ ¼
order = self.order_factory.limit(
    instrument_id=btc_usdt_id,
    order_side=OrderSide.BUY,
    quantity=Quantity.from_str("0.01"),
    price=Price.from_str("48000.00"),
    time_in_force=TimeInForce.GTC,
)
self.submit_order(order)

# æ­¢æè¨‚å–® â€” é˜²æ­¢è™§ææ“´å¤§
order = self.order_factory.stop_market(
    instrument_id=btc_usdt_id,
    order_side=OrderSide.SELL,
    quantity=Quantity.from_str("0.01"),
    trigger_price=Price.from_str("45000.00"),
)
self.submit_order(order)

# å–æ¶ˆè¨‚å–®
self.cancel_order(order)

# ä¿®æ”¹è¨‚å–®ï¼ˆæ”¹åƒ¹æˆ–æ”¹é‡ï¼‰
self.modify_order(order, price=Price.from_str("47500.00"))

# å…¨éƒ¨å–æ¶ˆ
self.cancel_all_orders(instrument_id=btc_usdt_id)</code></pre>
<h2>å››ã€æ¢ä»¶å–®çµ„åˆ (Contingency Orders)</h2>
<p>NautilusTrader æ”¯æ´ä¸‰ç¨®è¨‚å–®çµ„åˆç­–ç•¥ï¼š</p>
<div class="feature-grid">
<div class="feature-card">
<span class="icon">ğŸ”—</span>
<h4>OTO â€” One Triggers Other</h4>
<p>è¨‚å–® A æˆäº¤å¾Œï¼Œè‡ªå‹•è§¸ç™¼è¨‚å–® Bã€‚<br/><strong>ä¾‹å­</strong>ï¼šè²·å…¥å¾Œè‡ªå‹•æ›æ­¢æ</p>
</div>
<div class="feature-card">
<span class="icon">âš–ï¸</span>
<h4>OCO â€” One Cancels Other</h4>
<p>è¨‚å–® A æˆ– B ä»»ä¸€æˆäº¤ï¼Œè‡ªå‹•å–æ¶ˆå¦ä¸€å€‹ã€‚<br/><strong>ä¾‹å­</strong>ï¼šæ­¢ç›ˆå’Œæ­¢æåªè§¸ç™¼ä¸€å€‹</p>
</div>
<div class="feature-card">
<span class="icon">ğŸ¯</span>
<h4>OUO â€” One Updates Other</h4>
<p>è¨‚å–® A éƒ¨åˆ†æˆäº¤æ™‚ï¼Œè‡ªå‹•æ›´æ–°è¨‚å–® B çš„æ•¸é‡ã€‚<br/><strong>ä¾‹å­</strong>ï¼šä¿æŒæ­¢ææ•¸é‡å’ŒæŒå€‰ä¸€è‡´</p>
</div>
</div>
<h2>äº”ã€æ¨¡æ“¬äº¤æ˜“æ‰€ (SimulatedExchange)</h2>
<p>åœ¨å›æ¸¬å’Œæ²™ç®±æ¨¡å¼ä¸­ï¼ŒExecutionClient é€£æ¥çš„æ˜¯<strong>æ¨¡æ“¬äº¤æ˜“æ‰€</strong>è€ŒéçœŸå¯¦äº¤æ˜“æ‰€ï¼š</p>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>æ¨¡æ“¬äº¤æ˜“æ‰€</th>
<th>çœŸå¯¦äº¤æ˜“æ‰€</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ’®åˆå¼•æ“</td>
<td>å…§å»ºæ’®åˆé‚è¼¯</td>
<td>äº¤æ˜“æ‰€çš„æ’®åˆå¼•æ“</td>
</tr>
<tr>
<td>å»¶é²æ¨¡æ“¬</td>
<td>å¯é…ç½®å›ºå®šå»¶é²</td>
<td>çœŸå¯¦ç¶²çµ¡å»¶é²</td>
</tr>
<tr>
<td>æ‰‹çºŒè²»</td>
<td>æŒ‰é…ç½®è¨ˆç®—</td>
<td>äº¤æ˜“æ‰€å¯¦éš›æ”¶å–</td>
</tr>
<tr>
<td>æ»‘é»</td>
<td>å¯é…ç½®æ»‘é»æ¨¡å‹</td>
<td>çœŸå¯¦å¸‚å ´æ»‘é»</td>
</tr>
<tr>
<td>éƒ¨åˆ†æˆäº¤</td>
<td>åŸºæ–¼è¨‚å–®ç°¿æ·±åº¦æ¨¡æ“¬</td>
<td>çœŸå¯¦å¸‚å ´æ·±åº¦</td>
</tr>
</tbody>
</table>
</div>
<h2>å…­ã€äº’å‹•ç·´ç¿’</h2>
<div class="exercise-block">
<div class="exercise-title">ğŸ§  ç·´ç¿’ï¼šè¨­è¨ˆè¨‚å–®çµ„åˆ</div>
<p>ä½ æƒ³åœ¨ 50,000 è²·å…¥ BTCï¼ŒåŒæ™‚è¨­ç½®æ­¢æåœ¨ 48,000ã€æ­¢ç›ˆåœ¨ 55,000ï¼ˆåªè§¸ç™¼ä¸€å€‹å°±å–æ¶ˆå¦ä¸€å€‹ï¼‰ã€‚ä½ éœ€è¦ç”¨å“ªäº›è¨‚å–®å’Œä»€éº¼çµ„åˆæ–¹å¼ï¼Ÿ</p>
<button class="btn-run" onclick="toggleAnswer('answer-exec')">ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</button>
<div class="exercise-output" id="answer-exec">
<p><strong>æ­¥é©Ÿï¼š</strong></p>
<ol>
<li>æ›ä¸€å€‹é™åƒ¹è²·å…¥å–® @ 50,000ï¼ˆä¸»è¨‚å–®ï¼‰</li>
<li>è¨­ç½® <strong>OTO</strong> æ¢ä»¶ï¼šä¸»è¨‚å–®æˆäº¤å¾Œè§¸ç™¼ä»¥ä¸‹å…©å€‹å­è¨‚å–®</li>
<li>å­è¨‚å–® Aï¼šæ­¢æè³£å‡º @ 48,000ï¼ˆ<code>StopMarketOrder</code>ï¼‰</li>
<li>å­è¨‚å–® Bï¼šæ­¢ç›ˆè³£å‡º @ 55,000ï¼ˆ<code>LimitOrder</code>ï¼‰</li>
<li>å­è¨‚å–® A å’Œ B ä¹‹é–“è¨­ç½® <strong>OCO</strong>ï¼šä»»ä¸€æˆäº¤å°±å–æ¶ˆå¦ä¸€å€‹</li>
</ol>
<p>ğŸ’¡ é€™å°±æ˜¯ç¶“å…¸çš„ã€Œé€²å ´ + æ­¢ææ­¢ç›ˆã€ä¸‰åˆä¸€è¨‚å–®çµ„åˆï¼Œä¹Ÿå« <strong>Bracket Orderï¼ˆæ‹¬è™Ÿè¨‚å–®ï¼‰</strong>ã€‚</p>
</div>
</div>
<h2>ä¸ƒã€æœ¬æ¨¡çµ„é‡é»å›é¡§</h2>
<div class="card">
<div class="card-title">ğŸ“‹ é—œéµé»</div>
<ol>
<li><strong>åŸ·è¡Œå¼•æ“</strong>ç®¡ç†æ‰€æœ‰è¨‚å–®çš„ç”Ÿå‘½é€±æœŸï¼Œä¸ç›´æ¥é€£æ¥äº¤æ˜“æ‰€</li>
<li><strong>å‘½ä»¤ â†’ è·¯ç”± â†’ äº‹ä»¶</strong>ï¼šç­–ç•¥ç™¼é€å‘½ä»¤ï¼Œå¼•æ“è·¯ç”±åˆ°é©é…å™¨ï¼Œé©é…å™¨å›å ±äº‹ä»¶</li>
<li><strong>æ¢ä»¶å–®</strong>ï¼šOTOï¼ˆè§¸ç™¼ï¼‰ã€OCOï¼ˆå–æ¶ˆï¼‰ã€OUOï¼ˆæ›´æ–°ï¼‰ä¸‰ç¨®çµ„åˆ</li>
<li><strong>æ¨¡æ“¬äº¤æ˜“æ‰€</strong>ï¼šå›æ¸¬ä¸­å®Œå…¨æ¨¡æ“¬çœŸå¯¦äº¤æ˜“æ‰€è¡Œç‚º</li>
<li><strong>è¨‚å–®å·¥å» </strong>ï¼šä½¿ç”¨ <code>self.order_factory</code> å‰µå»ºè¨‚å–®</li>
</ol>
</div>
<div class="page-nav">
<a href="../Module_07_DataEngine/index.html"><span class="nav-label">â† ä¸Šä¸€ç« </span><span class="nav-title">æ¨¡çµ„ 07ï¼šæ•¸æ“šå¼•æ“</span></a>
<a href="../Module_09_RiskEngine/index.html" style="text-align:right;"><span class="nav-label">ä¸‹ä¸€ç« 
                            â†’</span><span class="nav-title">æ¨¡çµ„ 09ï¼šé¢¨æ§å¼•æ“</span></a>
</div>
</div>
</div>
</div>
<button aria-label="å›åˆ°é ‚éƒ¨" class="back-to-top">â†‘</button>
<script src="../assets/lecture.js"></script>
</body>
</html>