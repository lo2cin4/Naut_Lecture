<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>é™„éŒ„ Cï¼šä»£ç¢¼æ¨¡å¼é€ŸæŸ¥è¡¨ â€” NautilusTrader æ•™æ</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=Noto+Sans+TC:wght@300;400;500;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet"/>
<link href="../assets/style.css" rel="stylesheet"/>
</head>
<body>
<!-- Language Toggle -->
<style>
.lang-toggle {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    background: rgba(43, 48, 59, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 6px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    text-decoration: none;
    color: var(--text-secondary, #A0AEC0);
    font-size: 0.9rem;
    font-weight: 500;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
.lang-toggle:hover {
    background: rgba(60, 65, 75, 0.9);
    color: var(--text-primary, #F7FAFC);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}
.lang-toggle span.active {
    color: #64ffda;
    font-weight: 600;
}
.lang-toggle svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
}
</style>
<a class="lang-toggle" href="../en/Appendix/code_patterns.html" title="Switch to English">
<svg viewbox="0 0 24 24"><path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>
<span>EN / <span class="active">ä¸­</span></span>
</a>

<!-- Language Toggle -->


<div class="page-wrapper">
<nav class="sidebar">
<div class="sidebar-header">
<div class="sidebar-logo"><span class="icon">ğŸš</span> NautilusTrader æ•™æ</div>
</div>
<div class="sidebar-nav">
<div class="nav-section">
<div class="nav-section-title">ç¬¬ä¸€éšæ®µï¼šå…¨å±€èªè­˜</div>
</div>
<a class="nav-item" href="../Module_01_Why_NautilusTrader/index.html"><span class="nav-num">01</span>
                    ç‚ºä»€éº¼é¸æ“‡</a>
<a class="nav-item" href="../Module_02_Architecture_Overview/index.html"><span class="nav-num">02</span>
                    æ•´é«”æ¶æ§‹</a>
<a class="nav-item" href="../Module_03_Design_Philosophy/index.html"><span class="nav-num">03</span>
                    è¨­è¨ˆå“²å­¸</a>
<div class="nav-section">
<div class="nav-section-title">é™„éŒ„</div>
</div>
<a class="nav-item" href="glossary.html"><span class="nav-num">A</span> è¡“èªè¡¨</a>
<a class="nav-item" href="api_reference.html"><span class="nav-num">B</span> API é€ŸæŸ¥è¡¨</a>
<a class="nav-item active" href="code_patterns.html"><span class="nav-num">C</span> ä»£ç¢¼æ¨¡å¼</a>
<a class="nav-item" href="../index.html">ğŸ  å›åˆ°é¦–é </a>
</div>
</nav>
<div class="main-content">
<div class="top-bar">
<button aria-label="é–‹å•Ÿé¸å–®" class="menu-toggle">â˜°</button>
<div class="breadcrumb"><a href="../index.html">é¦–é </a><span class="separator">â€º</span>é™„éŒ„<span class="separator">â€º</span>ä»£ç¢¼æ¨¡å¼</div>
</div>
<div class="content-container">
<h1>é™„éŒ„ Cï¼šä»£ç¢¼æ¨¡å¼é€ŸæŸ¥è¡¨<span class="subtitle">å¸¸è¦‹äº¤æ˜“å ´æ™¯çš„æ¨™æº–ä»£ç¢¼æ¨¡æ¿</span></h1>
<h2>1. å•Ÿå‹•èˆ‡åŸºç¤è¨‚é–±</h2>
<pre><code class="language-python">def on_start(self):
    # ç²å– InstrumentId å°è±¡
    self.instrument_id = InstrumentId.from_str("BTCUSDT.BINANCE")
    
    # è¨‚é–± 1 åˆ†é˜ K ç·š
    self.subscribe_bars(BarType.from_str("BTCUSDT.BINANCE-1-MINUTE-LAST"))
    
    # åˆå§‹åŒ–æŒ‡æ¨™
    self.ema = ExponentialMovingAverage(period=20)</code></pre>
<h2>2. æª¢æŸ¥æŒå€‰ä¸¦ä¸‹å¸‚åƒ¹å–®</h2>
<pre><code class="language-python">def handle_signal(self):
    if self.portfolio.is_flat(self.instrument_id):
        order = self.order_factory.market(
            instrument_id=self.instrument_id,
            order_side=OrderSide.BUY,
            quantity=Quantity.from_str("0.01"),
        )
        self.submit_order(order)</code></pre>
<h2>3. è¨­ç½®æ­¢æé™åƒ¹å–® (OCO æ¨¡å¼)</h2>
<pre><code class="language-python">def on_position_opened(self, event):
    # ç•¶æ–°å€‰ä½å»ºç«‹æ™‚ï¼Œè‡ªå‹•æ›æ­¢æå’Œæ­¢ç›ˆ
    # æ³¨æ„ï¼šé€™è£¡é€šå¸¸çµåˆ OCO æˆ– Bracket Order é…ç½®
    pass</code></pre>
<h2>4. éæ­·ç•¶å‰æ‰€æœ‰æ›å–®</h2>
<pre><code class="language-python">def cancel_stale_orders(self):
    open_orders = self.cache.orders_open(self.instrument_id)
    for order in open_orders:
        if order.duration_seconds &gt; 60:
            self.cancel_order(order)</code></pre>
<h2>5. ä½¿ç”¨è‡ªå®šç¾©æ—¥èªŒ</h2>
<pre><code class="language-python">def on_order_denied(self, event):
    self.log.error(f"è¨‚å–®è¢«æ‹’çµ•ï¼åŸå› : {event.reason}")</code></pre>
</div>
</div>
</div>
<script src="../assets/lecture.js"></script>
</body>
</html>