<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡çµ„ 12ï¼šå›æ¸¬ç³»çµ±èˆ‡å¯¦ç›¤éƒ¨ç½² â€” NautilusTrader æ•™æ</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../assets/style.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>

<body>
    <div class="page-wrapper">
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo"><span class="icon">ğŸš</span> NautilusTrader æ•™æ</div>
            </div>
            <div class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">ç¬¬é›¶éšæ®µï¼šèµ·æ­¥</div>
                </div>
                <a class="nav-item" href="../Module_00_Getting_Started/index.html"><span class="nav-num">00</span>
                    ç’°å¢ƒå®‰è£</a>
                <div class="nav-section">
                    <div class="nav-section-title">ç¬¬ä¸€éšæ®µï¼šå…¨å±€èªè­˜</div>
                </div>
                <a class="nav-item" href="../Module_01_Why_NautilusTrader/index.html"><span class="nav-num">01</span>
                    ç‚ºä»€éº¼é¸æ“‡</a>
                <a class="nav-item" href="../Module_02_Architecture_Overview/index.html"><span class="nav-num">02</span>
                    æ•´é«”æ¶æ§‹</a>
                <a class="nav-item" href="../Module_03_Design_Philosophy/index.html"><span class="nav-num">03</span>
                    è¨­è¨ˆå“²å­¸</a>
                <div class="nav-section">
                    <div class="nav-section-title">ç¬¬äºŒéšæ®µï¼šæ ¸å¿ƒçµ„ä»¶</div>
                </div>
                <a class="nav-item" href="../Module_04_Domain_Model/index.html"><span class="nav-num">04</span> é ˜åŸŸæ¨¡å‹</a>
                <a class="nav-item" href="../Module_05_MessageBus/index.html"><span class="nav-num">05</span> æ¶ˆæ¯ç¸½ç·š</a>
                <a class="nav-item" href="../Module_05B_Data_Management/index.html"><span class="nav-num">05B</span> æ•¸æ“šç®¡ç†</a>

                <a class="nav-item" href="../Module_06_Cache/index.html"><span class="nav-num">06</span> ç·©å­˜ç³»çµ±</a>
                <a class="nav-item" href="../Module_07_DataEngine/index.html"><span class="nav-num">07</span> æ•¸æ“šå¼•æ“</a>
                <a class="nav-item" href="../Module_08_ExecutionEngine/index.html"><span class="nav-num">08</span>
                    åŸ·è¡Œå¼•æ“</a>
                <a class="nav-item" href="../Module_09_RiskEngine/index.html"><span class="nav-num">09</span> é¢¨æ§å¼•æ“</a>
                <a class="nav-item" href="../Module_10_Portfolio/index.html"><span class="nav-num">10</span> æŠ•è³‡çµ„åˆ</a>
                <div class="nav-section">
                    <div class="nav-section-title">ç¬¬ä¸‰éšæ®µï¼šå¯¦æˆ°æ‡‰ç”¨</div>
                </div>
                <a class="nav-item" href="../Module_11_Strategy_Development/index.html"><span class="nav-num">11</span>
                    ç­–ç•¥é–‹ç™¼</a>
                <a class="nav-item active" href="index.html"><span class="nav-num">12</span> å›æ¸¬èˆ‡å¯¦ç›¤</a>
                <div class="nav-section">
                    <div class="nav-section-title">ç¬¬å››éšæ®µï¼šé€²éšæ“´å±•</div>
                </div>
                <a class="nav-item" href="../Module_13_Adapters_Extensions/index.html"><span class="nav-num">13</span>
                    é©é…å™¨èˆ‡æ“´å±•</a>
                <a class="nav-item" href="../Module_14_Configuration/index.html"><span class="nav-num">14</span> é…ç½®ç³»çµ±æ·±æ½›</a>
                <a class="nav-item" href="../Module_15_Live_Advanced/index.html"><span class="nav-num">15</span> å¯¦ç›¤éƒ¨ç½²é€²éš</a>
                <a class="nav-item" href="../Module_16_Accounting_Risk/index.html"><span class="nav-num">16</span> æœƒè¨ˆèˆ‡é¢¨æ§</a>
                <a class="nav-item" href="../Module_17_Advanced_Topics/index.html"><span class="nav-num">17</span> é€²éšä¸»é¡Œ</a>
                <div class="nav-section">
                    <div class="nav-section-title">ç¬¬äº”éšæ®µï¼šå‹•æ‰‹ Lab</div>
                </div>
                <a class="nav-item" href="../Lab_01_Backtest_Workflow/index.html"><span class="nav-num">L1</span> Lab 01</a>
                <a class="nav-item" href="../Lab_02_Binance_Sandbox/index.html"><span class="nav-num">L2</span> Lab 02</a>
                <a class="nav-item" href="../Lab_03_Custom_Strategy/index.html"><span class="nav-num">L3</span> Lab 03</a>
            </div>
        </nav>

        <div class="main-content">
            <div class="top-bar">
                <button class="menu-toggle" aria-label="é–‹å•Ÿé¸å–®">â˜°</button>
                <div class="breadcrumb"><a href="../index.html">é¦–é </a><span class="separator">â€º</span>ç¬¬ä¸‰éšæ®µ<span
                        class="separator">â€º</span>æ¨¡çµ„ 12</div>
            </div>
            <div class="content-container">

                <span class="phase-label phase-3">ç¬¬ä¸‰éšæ®µï¼šå¯¦æˆ°æ‡‰ç”¨</span>
                <h1>æ¨¡çµ„ 12ï¼šå›æ¸¬ç³»çµ±èˆ‡å¯¦ç›¤éƒ¨ç½²<span class="subtitle">åŒä¸€ä»½ç­–ç•¥ä»£ç¢¼ï¼Œå¾æ­·å²å›æ¸¬ç„¡ç¸«åˆ‡æ›åˆ°å¯¦ç›¤äº¤æ˜“</span></h1>

                <!-- ==================== -->
                <h2>ä¸€ã€ä¸‰ç¨®é‹è¡Œç’°å¢ƒ</h2>

                <div class="mermaid-wrapper">
                    <div class="mermaid">
                        flowchart LR
                        subgraph bt["ğŸ”¬ å›æ¸¬ Backtest"]
                        hist["æ­·å²æ•¸æ“š"] --> sim1["æ¨¡æ“¬äº¤æ˜“æ‰€"]
                        sim1 --> report["ç¸¾æ•ˆå ±å‘Š"]
                        end
                        subgraph sb["ğŸ–ï¸ æ²™ç®± Sandbox"]
                        live_data["å³æ™‚æ•¸æ“š"] --> sim2["æ¨¡æ“¬äº¤æ˜“æ‰€"]
                        sim2 --> monitor["å³æ™‚ç›£æ§"]
                        end
                        subgraph lv["ğŸš€ å¯¦ç›¤ Live"]
                        live_data2["å³æ™‚æ•¸æ“š"] --> real["çœŸå¯¦äº¤æ˜“æ‰€"]
                        real --> pnl["çœŸé‡‘ç™½éŠ€"]
                        end

                        bt -->|"é©—è­‰é€šé"| sb
                        sb -->|"è§€å¯Ÿä¸€æ®µæ™‚é–“"| lv
                    </div>
                    <div class="caption">åœ– 1ï¼šç­–ç•¥çš„ä¸‰éšæ®µé©—è­‰æµç¨‹</div>
                </div>

                <div class="callout callout-warning">
                    <div class="callout-title">âš ï¸ æ ¸å¿ƒå„ªå‹¢</div>
                    <p>åœ¨é€™ä¸‰ç¨®ç’°å¢ƒä¸­ï¼Œä½ çš„<strong>ç­–ç•¥ä»£ç¢¼å®Œå…¨ä¸éœ€è¦ä¿®æ”¹</strong>ã€‚åªéœ€è¦æ”¹è®Šé…ç½®ä¸­çš„æ•¸æ“šæºå’Œäº¤æ˜“æ‰€é©é…å™¨ã€‚é€™å°±æ˜¯ NautilusTrader çš„æ ¸å¿ƒåƒ¹å€¼ä¸»å¼µä¹‹ä¸€ã€‚</p>
                </div>

                <div class="callout callout-info">
                    <div class="callout-title">ğŸ’¡ ç‚ºä»€éº¼å›æ¸¬é…ç½®éœ€è¦é€™éº¼è¤‡é›œï¼Ÿ</div>
                    <p><strong>âŒ å¦‚æœåªç”¨ç°¡å–®çš„ ã€Œprice * quantityã€ å›æ¸¬</strong>ï¼šä½ æœƒå¿½ç•¥æ‰‹çºŒè²»ã€æ»‘é»ã€å»¶é²ï¼Œå›æ¸¬çµæœå¯èƒ½æ¯”å¯¦ç›¤å¥½ 30-50%ï¼Œä¸Šç·šå¾Œæ‰ç™¼ç¾å…¨éƒ¨è™é ­è›‡å°¾ã€‚
                    </p>
                    <p><strong>âœ… ç”¨ NautilusTrader çš„çœŸå¯¦æ¨¡æ“¬</strong>ï¼šé…ç½®
                        FillModelï¼ˆæ»‘é»ï¼‰ã€FeeModelï¼ˆæ‰‹çºŒè²»ï¼‰ã€LatencyModelï¼ˆå»¶é²ï¼‰ï¼Œå›æ¸¬çµæœæ›´æ¥è¿‘å¯¦ç›¤ã€‚</p>
                </div>

                <!-- ==================== -->
                <h2>äºŒã€å›æ¸¬é…ç½®å®Œæ•´ç¯„ä¾‹</h2>

                <pre><code class="language-python">from nautilus_trader.backtest.engine import BacktestEngine
from nautilus_trader.backtest.config import (
    BacktestEngineConfig,
    BacktestVenueConfig,
    BacktestDataConfig,
    BacktestRunConfig,
)
from nautilus_trader.model.enums import AccountType, OmsType

# ===== 1. é…ç½®å¼•æ“ =====
engine_config = BacktestEngineConfig(
    trader_id="BACKTESTER-001",
    logging=LoggingConfig(log_level="INFO"),
    risk_engine=RiskEngineConfig(
        max_order_submit_rate="100/00:00:01",
    ),
)

# ===== 2. é…ç½®æ¨¡æ“¬äº¤æ˜“æ‰€ =====
venue_config = BacktestVenueConfig(
    name="BINANCE",
    oms_type=OmsType.NETTING,        # æ·¨é¡çµç®—
    account_type=AccountType.MARGIN,  # ä¿è­‰é‡‘å¸³æˆ¶
    starting_balances=["100_000 USDT"],
    default_leverage=10,              # 10 å€æ§“æ¡¿
    fill_model=FillModel(
        prob_fill_on_limit=0.2,       # é™åƒ¹å–®æˆäº¤æ¦‚ç‡
        prob_fill_on_stop=0.95,       # æ­¢æå–®æˆäº¤æ¦‚ç‡
        prob_slippage=0.5,            # æ»‘é»æ¦‚ç‡
    ),
)

# ===== 3. é…ç½®æ•¸æ“šæº =====
data_config = BacktestDataConfig(
    catalog_path="./data/catalog",
    data_cls="QuoteTick",
    instrument_id="BTCUSDT.BINANCE",
    start_time="2023-01-01",
    end_time="2023-12-31",
)

# ===== 4. é…ç½®ç­–ç•¥ =====
strategy_config = MyStrategyConfig(
    instrument_id=InstrumentId.from_str("BTCUSDT.BINANCE"),
    bar_type=BarType.from_str("BTCUSDT.BINANCE-1-MINUTE-LAST"),
    fast_ema_period=10,
    slow_ema_period=20,
)

# ===== 5. é‹è¡Œå›æ¸¬ =====
engine = BacktestEngine(config=engine_config)
engine.add_venue(venue_config)
engine.add_data(data_config)
engine.add_strategy(MyStrategy(strategy_config))

engine.run()

# ===== 6. æŸ¥çœ‹çµæœ =====
engine.trader.generate_order_fills_report()
engine.trader.generate_positions_report()
engine.trader.generate_account_report()</code></pre>

                <!-- ==================== -->
                <h2>ä¸‰ã€æ•¸æ“šç›®éŒ„ (Data Catalog)</h2>
                <p>NautilusTrader ä½¿ç”¨ <strong>Parquet æ ¼å¼</strong>é«˜æ•ˆå­˜å„²å›æ¸¬æ•¸æ“šï¼š</p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <span class="icon">ğŸ“</span>
                        <h4>æ•¸æ“šå¯«å…¥</h4>
                        <p>é©é…å™¨è‡ªå‹•å°‡æ”¶åˆ°çš„æ•¸æ“šå¯«å…¥ Parquet æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥æ‰‹å‹•å¾ CSV å°å…¥ã€‚</p>
                    </div>
                    <div class="feature-card">
                        <span class="icon">âš¡</span>
                        <h4>é«˜æ•ˆè®€å–</h4>
                        <p>Parquet æ˜¯åˆ—å¼æ ¼å¼ï¼Œè®€å– 1 å¹´çš„åˆ†é˜ K ç·šåªéœ€è¦å¹¾ç§’é˜ã€‚</p>
                    </div>
                    <div class="feature-card">
                        <span class="icon">ğŸ”</span>
                        <h4>æŒ‰éœ€åŠ è¼‰</h4>
                        <p>æ”¯æ´åªåŠ è¼‰æŒ‡å®šæ™‚é–“ç¯„åœå’Œå“ç¨®çš„æ•¸æ“šï¼Œç¯€çœè¨˜æ†¶é«”ã€‚</p>
                    </div>
                </div>

                <pre><code class="language-python"># å°‡æ•¸æ“šå¯«å…¥ç›®éŒ„
from nautilus_trader.persistence.catalog import ParquetDataCatalog

catalog = ParquetDataCatalog("./data/catalog")

# å¯«å…¥å ±åƒ¹æ•¸æ“š
catalog.write_data(quote_ticks)

# è®€å–æ•¸æ“šï¼ˆæŒ‰æ™‚é–“ç¯„åœï¼‰
ticks = catalog.quote_ticks(
    instrument_ids=["BTCUSDT.BINANCE"],
    start="2023-01-01",
    end="2023-06-30",
)</code></pre>

                <!-- ==================== -->
                <h2>ä¸‰Bã€FillModel / FeeModel / LatencyModel â€” ç¢ºä¿å›æ¸¬çœŸå¯¦</h2>
                <p>é€™ä¸‰å€‹ Model æ˜¯å€åˆ†ã€Œç©å…·å›æ¸¬ã€å’Œã€Œå°ˆæ¥­å›æ¸¬ã€çš„é—œéµï¼š</p>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Model</th>
                                <th>æ§åˆ¶ä»€éº¼</th>
                                <th>ç‚ºä»€éº¼é‡è¦</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>FillModel</strong></td>
                                <td>è¨‚å–®æˆäº¤çš„æ»‘é»å’Œéƒ¨åˆ†æˆäº¤ã€‚å¯æ¨¡æ“¬ã€Œå¸‚åƒ¹å–®æ»‘ 2 tickã€ã€ã€Œé™åƒ¹å–®åªæˆäº¤ 80%ã€</td>
                                <td>å¯¦ç›¤ä¸­å¹¾ä¹ä¸å¯èƒ½ç¸½ä»¥ç†æƒ³åƒ¹æ ¼æˆäº¤</td>
                            </tr>
                            <tr>
                                <td><strong>FeeModel</strong></td>
                                <td>äº¤æ˜“æ‰‹çºŒè²»ã€‚å¯é…ç½® maker/taker è²»ç‡ï¼Œä¹Ÿå¯é…ç½®å›ºå®šæ‰‹çºŒè²»</td>
                                <td>é«˜é »ç­–ç•¥æ¯å¤©æ•¸ç™¾ç­†äº¤æ˜“ï¼Œæ‰‹çºŒè²»ç´¯ç©å½±éŸ¿å·¨å¤§</td>
                            </tr>
                            <tr>
                                <td><strong>LatencyModel</strong></td>
                                <td>ç¶²è·¯å»¶é²ã€‚å¯æ¨¡æ“¬ã€Œæäº¤è¨‚å–®åˆ°äº¤æ˜“æ‰€ç¢ºèªã€çš„æ™‚é–“å·®</td>
                                <td>å¯¦ç›¤ä¸­å»¶é²å¯èƒ½å°è‡´éŒ¯éæœ€ä½³å…¥å ´é»</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <pre><code class="language-python">"""é…ç½®çœŸå¯¦çš„å›æ¸¬ç’°å¢ƒ"""
from nautilus_trader.backtest.models import (
    FillModel, FeeModel, LatencyModel,
)

# æ»‘é»æ¨¡å‹ï¼šå¸‚åƒ¹å–®æ»‘ 1 tickï¼Œé™åƒ¹å–® 80% æ©Ÿç‡å…¨é¡æˆäº¤
fill_model = FillModel(
    prob_fill_on_limit=0.80,    # é™åƒ¹å–® 80% æ©Ÿç‡æˆäº¤
    prob_fill_on_stop=0.95,     # åœæå–® 95% æ©Ÿç‡æˆäº¤
    prob_slippage=0.50,         # 50% æ©Ÿç‡æœ‰æ»‘é»
    random_seed=42,             # å›ºå®šéš¨æ©Ÿç¨®å­ï¼Œç¢ºä¿å¯é‡ç¾
)

# æ‰‹çºŒè²»æ¨¡å‹ï¼šmake å–® 0.02%, take å–® 0.04%
fee_model = FeeModel(
    maker_fee=0.0002,
    taker_fee=0.0004,
)

# å»¶é²æ¨¡å‹ï¼šæäº¤ 50ms, å–æ¶ˆ 30ms
latency_model = LatencyModel(
    submit_order_latency_ms=50,
    cancel_order_latency_ms=30,
)

# å°‡ model åŠ å…¥äº¤æ˜“æ‰€é…ç½®
venue_config = BacktestVenueConfig(
    name="BINANCE",
    oms_type=OmsType.NETTING,
    account_type=AccountType.MARGIN,
    starting_balances=["100_000 USDT"],
    fill_model=fill_model,
    fee_model=fee_model,
    latency_model=latency_model,  # å¯é¸
)</code></pre>

                <!-- ==================== -->
                <h2>ä¸‰Cã€Tearsheet â€” å›æ¸¬çµæœå¯è¦–åŒ–</h2>
                <p>è·‘å®Œå›æ¸¬å¾Œï¼Œä¸€è¡Œä»£ç¢¼ç”Ÿæˆå®Œæ•´çš„äº’å‹•å¼ç¸¾æ•ˆå ±è¡¨ï¼š</p>

                <pre><code class="language-python">from nautilus_trader.analysis import create_tearsheet

# å›æ¸¬çµæŸå¾Œï¼Œç”¨é€™ä¸€è¡Œç”Ÿæˆå ±è¡¨
create_tearsheet(engine, output_path="tearsheet.html")
# â†’ æ‰“é–‹ tearsheet.html å°±èƒ½çœ‹åˆ°äº’å‹•å¼ Plotly åœ–è¡¨ï¼

# ä¹Ÿå¯ä»¥å–®ç¨ç”ŸæˆæŸä¸€å¼µåœ–
from nautilus_trader.analysis import (
    create_equity_curve,        # è³‡é‡‘æ›²ç·š
    create_drawdown_chart,      # å›æ’¤åœ–
    create_monthly_returns_heatmap,  # æœˆåº¦ç†±åŠ›åœ–
    create_rolling_sharpe,      # æ»¾å‹• Sharpe
    create_returns_distribution,# æ”¶ç›Šåˆ†å¸ƒ
)

# è³‡é‡‘æ›²ç·šåœ–
fig = create_equity_curve(
    engine,
    output_path="equity.html",
    title="My EMA Strategy",
)</code></pre>

                <div class="feature-grid">
                    <div class="feature-card">
                        <span class="icon">ğŸ“ˆ</span>
                        <h4>Equity Chart</h4>
                        <p>è³‡é‡‘æ›²ç·šï¼Œå¯ç–ŠåŠ  Benchmark å°æ¯”</p>
                    </div>
                    <div class="feature-card">
                        <span class="icon">ğŸ“‰</span>
                        <h4>Drawdown Chart</h4>
                        <p>å›æ’¤æ·±åº¦å’ŒæŒçºŒæ™‚é–“</p>
                    </div>
                    <div class="feature-card">
                        <span class="icon">ğŸ“…</span>
                        <h4>Monthly Returns</h4>
                        <p>æœˆåº¦æ”¶ç›Šç†±åŠ›åœ–ï¼Œä¸€çœ¼çœ‹å‡ºå­£ç¯€æ€§</p>
                    </div>
                    <div class="feature-card">
                        <span class="icon">ğŸ“Š</span>
                        <h4>Rolling Sharpe</h4>
                        <p>æ»¾å‹• Sharpe æ¯”ç‡ï¼Œè§€å¯Ÿç­–ç•¥ç©©å®šæ€§</p>
                    </div>
                    <div class="feature-card">
                        <span class="icon">ğŸ””</span>
                        <h4>Returns Distribution</h4>
                        <p>æ”¶ç›Šåˆ†å¸ƒåœ–ï¼Œçœ‹æ˜¯å¦åæ–œ</p>
                    </div>
                    <div class="feature-card">
                        <span class="icon">ğŸ•¯ï¸</span>
                        <h4>Bars with Fills</h4>
                        <p>K ç·š + è²·è³£é»æ¨™è¨˜</p>
                    </div>
                </div>

                <!-- ==================== -->
                <h2>å››ã€å¯¦ç›¤éƒ¨ç½²</h2>

                <pre><code class="language-python"># å¯¦ç›¤é…ç½® â€” åªæ”¹é©é…å™¨ï¼Œç­–ç•¥ä»£ç¢¼ä¸è®Šï¼
from nautilus_trader.live.node import TradingNode
from nautilus_trader.adapters.binance.config import (
    BinanceLiveDataClientConfig,
    BinanceLiveExecClientConfig,
)

node = TradingNode(config=TradingNodeConfig(
    trader_id="LIVE-001",
    data_clients={
        "BINANCE": BinanceLiveDataClientConfig(
            api_key="your-api-key",
            api_secret="your-api-secret",
        ),
    },
    exec_clients={
        "BINANCE": BinanceLiveExecClientConfig(
            api_key="your-api-key",
            api_secret="your-api-secret",
        ),
    },
))

# åŠ å…¥åŒä¸€å€‹ç­–ç•¥ï¼
node.trader.add_strategy(MyStrategy(strategy_config))
node.run()</code></pre>

                <div class="callout callout-success">
                    <div class="callout-title">âœ… æ³¨æ„çœ‹</div>
                    <p>ç­–ç•¥ä»£ç¢¼å’Œé…ç½®<strong>ä¸€æ¨¡ä¸€æ¨£</strong>ã€‚å”¯ä¸€æ”¹è®Šçš„æ˜¯ DataClient å’Œ ExecClient å¾æ¨¡æ“¬è®Šæˆäº† Binance çœŸå¯¦é©é…å™¨ã€‚</p>
                </div>

                <h3>å¯¦ç›¤å®‰å…¨æ©Ÿåˆ¶</h3>
                <p>NautilusTrader ç‚ºå¯¦ç›¤æä¾›äº†å¹¾å€‹é—œéµçš„å®‰å…¨æ©Ÿåˆ¶ï¼š</p>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>æ©Ÿåˆ¶</th>
                                <th>ä½œç”¨</th>
                                <th>ä¾†æº</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Reconciliation</strong></td>
                                <td>ç·šä¸Šè¨‚å–®å°å¸³ï¼šå®šæœŸæª¢æŸ¥æœ¬åœ°ç‹€æ…‹å’Œäº¤æ˜“æ‰€æ˜¯å¦ä¸€è‡´</td>
                                <td><code>live/reconciliation.py</code></td>
                            </tr>
                            <tr>
                                <td><strong>Retry</strong></td>
                                <td>è¨‚å–®æäº¤å¤±æ•—è‡ªå‹•é‡è©¦ï¼ˆå¯é…ç½®é‡è©¦æ¬¡æ•¸å’Œé–“éš”ï¼‰</td>
                                <td><code>live/retry.py</code></td>
                            </tr>
                            <tr>
                                <td><strong>Heartbeat</strong></td>
                                <td>å®šæ™‚å¿ƒè·³æª¢æ¸¬ï¼Œæ–·ç·šè‡ªå‹•é‡é€£</td>
                                <td>å„ Adapter å…§å»º</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ==================== -->
                <h2>äº”ã€å›æ¸¬å¸¸è¦‹é™·é˜±</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>é™·é˜±</th>
                                <th>èªªæ˜</th>
                                <th>å¦‚ä½•é¿å…</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="color:var(--accent-red);">å‰è¦–åå·®</td>
                                <td>ä½¿ç”¨äº†æœªä¾†æ‰çŸ¥é“çš„æ•¸æ“šåšæ±ºç­–</td>
                                <td>åªç”¨ on_bar ä¸­æ”¶åˆ°çš„ bar æ•¸æ“š</td>
                            </tr>
                            <tr>
                                <td style="color:var(--accent-red);">éæ“¬åˆ</td>
                                <td>ç­–ç•¥åªåœ¨ç‰¹å®šæ­·å²æ•¸æ“šä¸Šè¡¨ç¾å¥½</td>
                                <td>åˆ†æˆè¨“ç·´é›†å’Œæ¸¬è©¦é›†</td>
                            </tr>
                            <tr>
                                <td style="color:var(--accent-red);">å¿½ç•¥æ‰‹çºŒè²»</td>
                                <td>ä¸è¨ˆå…¥æ‰‹çºŒè²»å°è‡´è™›å‡ç›ˆåˆ©</td>
                                <td>é…ç½®çœŸå¯¦çš„ maker/taker è²»ç‡</td>
                            </tr>
                            <tr>
                                <td style="color:var(--accent-red);">å¿½ç•¥æ»‘é»</td>
                                <td>å‡è¨­ç¸½ä»¥ç†æƒ³åƒ¹æ ¼æˆäº¤</td>
                                <td>é…ç½® FillModel æ»‘é»</td>
                            </tr>
                            <tr>
                                <td style="color:var(--accent-red);">å­˜æ´»è€…åå·®</td>
                                <td>åªæ¸¬è©¦ç¾åœ¨é‚„å­˜åœ¨çš„å“ç¨®</td>
                                <td>åŒ…å«å·²é€€å¸‚å“ç¨®çš„æ•¸æ“š</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ==================== -->
                <h2>ä¸ƒã€äº’å‹•ç·´ç¿’</h2>
                <div class="exercise-block">
                    <div class="exercise-title">ğŸ§  ç·´ç¿’ 1ï¼šå¾å›æ¸¬åˆ°å¯¦ç›¤</div>
                    <p>ä½ çš„ EMA ç­–ç•¥å›æ¸¬çµæœå¾ˆå¥½ï¼Œä½ éœ€è¦ä¿®æ”¹å“ªäº›æ±è¥¿æ‰èƒ½å¯¦ç›¤é‹è¡Œï¼Ÿåˆ—å‡ºå…·é«”æ­¥é©Ÿã€‚</p>
                    <button class="btn-run" onclick="toggleAnswer('answer-live')">ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</button>
                    <div class="exercise-output" id="answer-live">æ­¥é©Ÿï¼ˆåªæ”¹é…ç½®ï¼Œä¸æ”¹ç­–ç•¥ä»£ç¢¼ï¼‰ï¼š

                        1. âŒ ä¸éœ€è¦ä¿®æ”¹ç­–ç•¥ä»£ç¢¼
                        2. âœ… å°‡ BacktestEngine æ”¹ç‚º TradingNode
                        3. âœ… å°‡æ•¸æ“šæºå¾ BacktestDataConfig æ”¹ç‚º BinanceLiveDataClientConfig
                        4. âœ… å°‡åŸ·è¡Œå®¢æˆ¶ç«¯æ”¹ç‚º BinanceLiveExecClientConfig
                        5. âœ… å¡«å…¥çœŸå¯¦çš„ API Key å’Œ Secret
                        6. âœ… èª¿æ•´é¢¨æ§åƒæ•¸ï¼ˆå¯¦ç›¤æ‡‰æ›´ä¿å®ˆï¼‰
                        7. âœ… å»ºè­°å…ˆç”¨å°è³‡é‡‘çš„æ²™ç®±æ¨¡å¼è§€å¯Ÿä¸€æ®µæ™‚é–“

                        ç¸½çµï¼šç­–ç•¥é‚è¼¯ 0 è¡Œæ”¹å‹•ï¼Œåªæ”¹ã€ŒåŸºç¤è¨­æ–½ã€é…ç½®ã€‚</div>
                </div>

                <div class="exercise-block">
                    <div class="exercise-title">ğŸ§  ç·´ç¿’ 2ï¼šè¨ºæ–·å›æ¸¬å•é¡Œ</div>
                    <p>ä½ çš„ç­–ç•¥å›æ¸¬é¡¯ç¤ºå¹´åŒ–å›å ± 200%ï¼Œä½†ä¸Šå¯¦ç›¤å¾Œå»æŒçºŒè™§æã€‚å¯èƒ½æ˜¯ä»€éº¼åŸå› ï¼Ÿ</p>
                    <button class="btn-run" onclick="toggleAnswer('answer-diag')">ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</button>
                    <div class="exercise-output" id="answer-diag">å¯èƒ½åŸå› ï¼ˆæŒ‰å¯èƒ½æ€§æ’åºï¼‰ï¼š

                        1. æ²’é…ç½®æ‰‹çºŒè²» (FeeModel)
                        â†’ å›æ¸¬æ™‚ 0 æ‰‹çºŒè²»ï¼Œå¯¦éš›æ¯ç­†è¦æ‰£ 0.04%

                        2. æ²’é…ç½®æ»‘é» (FillModel)
                        â†’ å›æ¸¬å‡è¨­ç¸½æ˜¯ä»¥ç†æƒ³åƒ¹æˆäº¤ï¼Œå¯¦éš›å¯èƒ½æ»‘ 1-3 tick

                        3. éæ“¬åˆ (å‰è¦–åå·®)
                        â†’ åƒæ•¸åªåœ¨æ­·å²æ•¸æ“šä¸Šæœ€å„ªï¼Œæœªä¾†å¤±æ•ˆ
                        â†’ ä½¿ç”¨ Walk-Forward æˆ– Out-of-Sample æ¸¬è©¦

                        4. å­˜æ´»è€…åå·®
                        â†’ åªæ¸¬äº†ç¾åœ¨é‚„åœ¨äº¤æ˜“çš„å“ç¨®ï¼Œå¿½ç•¥äº†å·²ä¸‹æ¶çš„

                        5. å»¶é²å½±éŸ¿
                        â†’ å›æ¸¬ç„¡å»¶é²ï¼Œå¯¦ç›¤æœ‰ 50-200ms å»¶é²</div>
                </div>

                <div class="exercise-block">
                    <div class="exercise-title">ğŸ§  ç·´ç¿’ 3ï¼šFillModel é…ç½®</div>
                    <p>ä»¥ä¸‹å…¬å¼è¨ˆç®—äº†å›æ¸¬ vs å¯¦ç›¤çš„å·®ç•°ã€‚å¦‚æœä½ çš„ç­–ç•¥å¹³å‡æ¯å¤©äº¤æ˜“ 50 ç­†ï¼Œæ¯ç­†æˆäº¤é‡‘é¡ $1000ï¼Œtaker è²»ç‡ 0.04%ï¼Œä¸€å¹´ä¸‹ä¾†æ‰‹çºŒè²»ç¸½å…±å¤šå°‘ï¼Ÿ</p>
                    <button class="btn-run" onclick="toggleAnswer('answer-fee')">ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</button>
                    <div class="exercise-output" id="answer-fee">è¨ˆç®—ï¼š
                        50 ç­†/å¤© Ã— $1000/ç­† Ã— 0.04% Ã— 250 äº¤æ˜“æ—¥
                        = 50 Ã— 1000 Ã— 0.0004 Ã— 250
                        = $5,000

                        ğŸ’¡ å¦‚æœä½ çš„å›æ¸¬å¹´åŒ–æ”¶ç›Šåªæœ‰ $3,000ï¼Œ
                        é‚£å®ƒåœ¨å¯¦ç›¤ä¸­å…¶å¯¦æ˜¯è™§æçš„ï¼
                        é€™å°±æ˜¯ç‚ºä»€éº¼ FeeModel å¦‚æ­¤é‡è¦ã€‚</div>
                </div>

                <h2>ä¸ƒã€æœ¬æ¨¡çµ„é‡é»å›é¡§</h2>
                <div class="card">
                    <div class="card-title">ğŸ“‹ é—œéµé»</div>
                    <ol>
                        <li><strong>ä¸‰ç¨®ç’°å¢ƒ</strong>ï¼šå›æ¸¬ â†’ æ²™ç®± â†’ å¯¦ç›¤ï¼Œç­–ç•¥ä»£ç¢¼ä¸è®Š</li>
                        <li><strong>å›æ¸¬é…ç½®</strong>ï¼šå¼•æ“ + æ¨¡æ“¬äº¤æ˜“æ‰€ + æ•¸æ“š + ç­–ç•¥</li>
                        <li><strong>FillModel / FeeModel / LatencyModel</strong>ï¼šæ¨¡æ“¬çœŸå¯¦çš„æ»‘é»ã€æ‰‹çºŒè²»ã€å»¶é²</li>
                        <li><strong>Tearsheet</strong>ï¼šä¸€è¡Œä»£ç¢¼ç”Ÿæˆäº’å‹•å¼ç¸¾æ•ˆå ±è¡¨ï¼ˆ6 ç¨®åœ–è¡¨ï¼‰</li>
                        <li><strong>Data Catalog</strong>ï¼šParquet æ ¼å¼é«˜æ•ˆå­˜å„²æ­·å²æ•¸æ“š</li>
                        <li><strong>å¯¦ç›¤éƒ¨ç½²</strong>ï¼šåªéœ€å°‡é©é…å™¨å¾æ¨¡æ“¬æ”¹ç‚ºçœŸå¯¦</li>
                        <li><strong>å®‰å…¨æ©Ÿåˆ¶</strong>ï¼šReconciliation å°å¸³ã€Retry é‡è©¦ã€Heartbeat å¿ƒè·³</li>
                        <li><strong>å›æ¸¬é™·é˜±</strong>ï¼šå‰è¦–åå·®ã€éæ“¬åˆã€å¿½ç•¥è²»ç”¨å’Œæ»‘é»</li>
                    </ol>
                </div>

                <div class="page-nav">
                    <a href="../Module_11_Strategy_Development/index.html"><span class="nav-label">â† ä¸Šä¸€ç« </span><span
                            class="nav-title">æ¨¡çµ„ 11ï¼šç­–ç•¥é–‹ç™¼å®Œå…¨æŒ‡å—</span></a>
                    <a href="../Module_13_Adapters_Extensions/index.html" style="text-align:right;"><span
                            class="nav-label">ä¸‹ä¸€ç«  â†’</span><span class="nav-title">æ¨¡çµ„ 13ï¼šé©é…å™¨èˆ‡æ“´å±•</span></a>
                </div>
            </div>
        </div>
    </div>
    <button class="back-to-top" aria-label="å›åˆ°é ‚éƒ¨">â†‘</button>
    <script src="../assets/lecture.js"></script>
</body>

</html>