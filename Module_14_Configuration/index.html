<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>æ¨¡çµ„ 14ï¼šé…ç½®ç³»çµ±æ·±æ½› â€” NautilusTrader æ•™æ</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;family=Noto+Sans+TC:wght@300;400;500;700&amp;family=JetBrains+Mono:wght@400;500&amp;display=swap" rel="stylesheet"/>
<link href="../assets/style.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>
<body>
<!-- Language Toggle -->
<style>
.lang-toggle {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    background: rgba(43, 48, 59, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 6px 12px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    backdrop-filter: blur(10px);
    transition: all 0.3s ease;
    text-decoration: none;
    color: var(--text-secondary, #A0AEC0);
    font-size: 0.9rem;
    font-weight: 500;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}
.lang-toggle:hover {
    background: rgba(60, 65, 75, 0.9);
    color: var(--text-primary, #F7FAFC);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}
.lang-toggle span.active {
    color: #64ffda;
    font-weight: 600;
}
.lang-toggle svg {
    width: 16px;
    height: 16px;
    fill: currentColor;
}
</style>
<a class="lang-toggle" href="../en/Module_14_Configuration/index.html" title="Switch to English">
<svg viewbox="0 0 24 24"><path d="M12.87 15.07l-2.54-2.51.03-.03A17.52 17.52 0 0014.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>
<span>EN / <span class="active">ä¸­</span></span>
</a>

<!-- Language Toggle -->


<div class="page-wrapper">
<nav class="sidebar">
<div class="sidebar-header">
<div class="sidebar-logo"><span class="icon">ğŸš</span> NautilusTrader æ•™æ</div>
</div>
<div class="sidebar-nav">
<div class="nav-section">
<div class="nav-section-title">ç¬¬é›¶éšæ®µï¼šèµ·æ­¥</div>
</div>
<a class="nav-item" href="../Module_00_Getting_Started/index.html"><span class="nav-num">00</span>
                    ç’°å¢ƒå®‰è£</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬ä¸€éšæ®µï¼šå…¨å±€èªè­˜</div>
</div>
<a class="nav-item" href="../Module_01_Why_NautilusTrader/index.html"><span class="nav-num">01</span>
                    ç‚ºä»€éº¼é¸æ“‡ NT</a>
<a class="nav-item" href="../Module_02_Architecture_Overview/index.html"><span class="nav-num">02</span>
                    æ¶æ§‹é³¥ç°åœ–</a>
<a class="nav-item" href="../Module_03_Design_Philosophy/index.html"><span class="nav-num">03</span>
                    è¨­è¨ˆå“²å­¸</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬äºŒéšæ®µï¼šæ ¸å¿ƒçµ„ä»¶</div>
</div>
<a class="nav-item" href="../Module_04_Domain_Model/index.html"><span class="nav-num">04</span> é ˜åŸŸæ¨¡å‹</a>
<a class="nav-item" href="../Module_05_MessageBus/index.html"><span class="nav-num">05</span> æ¶ˆæ¯ç¸½ç·š</a>
<a class="nav-item" href="../Module_05B_Data_Management/index.html"><span class="nav-num">05B</span>
                    æ•¸æ“šç®¡ç†</a>
<a class="nav-item" href="../Module_06_Cache/index.html"><span class="nav-num">06</span> ç·©å­˜ç³»çµ±</a>
<a class="nav-item" href="../Module_07_DataEngine/index.html"><span class="nav-num">07</span> æ•¸æ“šå¼•æ“</a>
<a class="nav-item" href="../Module_08_ExecutionEngine/index.html"><span class="nav-num">08</span>
                    åŸ·è¡Œå¼•æ“</a>
<a class="nav-item" href="../Module_09_RiskEngine/index.html"><span class="nav-num">09</span> é¢¨æ§å¼•æ“</a>
<a class="nav-item" href="../Module_10_Portfolio/index.html"><span class="nav-num">10</span> æŠ•è³‡çµ„åˆ</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬ä¸‰éšæ®µï¼šå¯¦æˆ°æ‡‰ç”¨</div>
</div>
<a class="nav-item" href="../Module_11_Strategy_Development/index.html"><span class="nav-num">11</span>
                    ç­–ç•¥é–‹ç™¼</a>
<a class="nav-item" href="../Module_12_Backtest_And_Live/index.html"><span class="nav-num">12</span>
                    å›æ¸¬èˆ‡å¯¦ç›¤</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬å››éšæ®µï¼šé€²éšæ“´å±•</div>
</div>
<a class="nav-item" href="../Module_13_Adapters_Extensions/index.html"><span class="nav-num">13</span>
                    é©é…å™¨èˆ‡æ“´å±•</a>
<a class="nav-item active" href="index.html"><span class="nav-num">14</span> é…ç½®ç³»çµ±æ·±æ½›</a>
<a class="nav-item" href="../Module_15_Live_Advanced/index.html"><span class="nav-num">15</span>
                    å¯¦ç›¤éƒ¨ç½²é€²éš</a>
<a class="nav-item" href="../Module_16_Accounting_Risk/index.html"><span class="nav-num">16</span>
                    æœƒè¨ˆèˆ‡é¢¨æ§</a>
<a class="nav-item" href="../Module_17_Advanced_Topics/index.html"><span class="nav-num">17</span>
                    é€²éšä¸»é¡Œ</a>
<div class="nav-section">
<div class="nav-section-title">ç¬¬äº”éšæ®µï¼šå‹•æ‰‹ Lab</div>
</div>
<a class="nav-item" href="../Lab_01_Backtest_Workflow/index.html"><span class="nav-num">L1</span> Lab
                    01</a>
<a class="nav-item" href="../Lab_02_Binance_Sandbox/index.html"><span class="nav-num">L2</span> Lab
                    02</a>
<a class="nav-item" href="../Lab_03_Custom_Strategy/index.html"><span class="nav-num">L3</span> Lab
                    03</a>
</div>
</nav>
<div class="main-content">
<div class="top-bar">
<button aria-label="é–‹å•Ÿé¸å–®" class="menu-toggle">â˜°</button>
<div class="breadcrumb"><a href="../index.html">é¦–é </a><span class="separator">â€º</span>ç¬¬å››éšæ®µ<span class="separator">â€º</span>æ¨¡çµ„ 14</div>
</div>
<div class="content-container">
<span class="phase-label phase-4">ç¬¬å››éšæ®µï¼šé€²éšæ“´å±•</span>
<h1>æ¨¡çµ„ 14ï¼šé…ç½®ç³»çµ±æ·±æ½›<span class="subtitle">æŒæ¡ NautilusTrader çš„æ¯ä¸€å€‹é…ç½®åƒæ•¸ï¼Œå»ºç«‹å¯é‡ç¾ã€å¯èª¿å„ªçš„äº¤æ˜“ç³»çµ±</span></h1>
<!-- ==================== -->
<h2>ä¸€ã€ç‚ºä»€éº¼é…ç½®ç³»çµ±å¦‚æ­¤é‡è¦ï¼Ÿ</h2>
<div class="callout callout-info">
<div class="callout-title">ğŸ’¡ ç‚ºä»€éº¼ä¸ç›´æ¥åœ¨ä»£ç¢¼è£¡å¯«æ­»åƒæ•¸ï¼Ÿ</div>
<p><strong>âŒ å¦‚æœæŠŠåƒæ•¸å¯«åœ¨ç­–ç•¥ä»£ç¢¼è£¡</strong>ï¼šæ¯æ¬¡æ”¹åƒæ•¸éƒ½è¦æ”¹ä»£ç¢¼ â†’ ç‰ˆæœ¬ç®¡ç†æ··äº‚ â†’ å›æ¸¬å’Œå¯¦ç›¤å¯èƒ½ç”¨äº†ä¸åŒåƒæ•¸ â†’ ç½é›£ã€‚</p>
<p><strong>âœ… ç”¨é…ç½®ç³»çµ±</strong>ï¼šåƒæ•¸é›†ä¸­ç®¡ç†ã€å¯åºåˆ—åŒ–ã€å¯ç‰ˆæœ¬æ§åˆ¶ã€‚<code>NautilusConfig</code> åŸºæ–¼
                        <code>msgspec</code>ï¼Œæ‰€æœ‰é…ç½®éƒ½æ˜¯ <strong>frozenï¼ˆä¸å¯è®Šï¼‰</strong> çš„ï¼Œç¢ºä¿é‹è¡ŒæœŸé–“ä¸æœƒè¢«æ„å¤–ä¿®æ”¹ã€‚
                    </p>
</div>
<!-- ==================== -->
<h2>äºŒã€é…ç½®å±¤ç´šæ¶æ§‹</h2>
<p>NautilusTrader çš„é…ç½®æ˜¯<strong>æ¨¹ç‹€çµæ§‹</strong>ï¼Œæœ€é ‚å±¤çš„é…ç½®åŒ…å«æ‰€æœ‰å­ç³»çµ±çš„é…ç½®ï¼š</p>
<div class="mermaid-wrapper">
<div class="mermaid">
                        flowchart TD
                        root["ğŸ”§ TradingNodeConfig / BacktestEngineConfig"]
                        kernel["NautilusKernelConfig"]
                        cache["CacheConfig"]
                        msgbus["MessageBusConfig"]
                        data["DataEngineConfig"]
                        exec["ExecEngineConfig"]
                        risk["RiskEngineConfig"]
                        log["LoggingConfig"]
                        port["PortfolioConfig"]
                        emu["OrderEmulatorConfig"]
                        stream["StreamingConfig"]
                        ctrl["ControllerConfig"]

                        root --&gt; kernel
                        kernel --&gt; cache
                        kernel --&gt; msgbus
                        kernel --&gt; data
                        kernel --&gt; exec
                        kernel --&gt; risk
                        kernel --&gt; log
                        kernel --&gt; port
                        kernel --&gt; emu
                        kernel --&gt; stream
                        kernel --&gt; ctrl

                        style root fill:#0f1419,stroke:#4fc3f7,stroke-width:2px
                        style kernel fill:#0f1419,stroke:#ab47bc,stroke-width:2px
                    </div>
<div class="caption">åœ– 1ï¼šé…ç½®çš„æ¨¹ç‹€å±¤ç´š â€” ä¸€å€‹é ‚å±¤é…ç½®åŒ…å«æ‰€æœ‰å­ç³»çµ±é…ç½®</div>
</div>
<div class="callout callout-warning">
<div class="callout-title">âš ï¸ frozen ä¸å¯è®Š</div>
<p>æ‰€æœ‰çš„ Config é¡éƒ½æ¨™è¨˜äº†
                        <code>frozen=True</code>ï¼Œä¸€æ—¦å‰µå»ºå°±<strong>ä¸èƒ½ä¿®æ”¹</strong>ã€‚é€™æ˜¯åˆ»æ„è¨­è¨ˆï¼šç¢ºä¿åœ¨ç³»çµ±é‹è¡ŒæœŸé–“åƒæ•¸ä¸æœƒè¢«æ„å¤–æ”¹è®Šã€‚å¦‚æœä½ éœ€è¦æ”¹åƒæ•¸ï¼Œå¿…é ˆé‡æ–°å‰µå»ºé…ç½®ä¸¦é‡å•Ÿç³»çµ±ã€‚
                    </p>
</div>
<!-- ==================== -->
<h2>ä¸‰ã€NautilusKernelConfig â€” æ ¸å¿ƒé…ç½®</h2>
<p>é€™æ˜¯æ•´å€‹ç³»çµ±çš„æ ¸å¿ƒé…ç½®ï¼Œæ‰€æœ‰ <code>TradingNodeConfig</code> å’Œ <code>BacktestEngineConfig</code> éƒ½ç¹¼æ‰¿è‡ªå®ƒã€‚</p>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>åƒæ•¸</th>
<th>é¡å‹</th>
<th>é è¨­å€¼</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>environment</code></td>
<td>Environment</td>
<td>â€”</td>
<td>é‹è¡Œç’°å¢ƒï¼šBACKTEST / SANDBOX / LIVE</td>
</tr>
<tr>
<td><code>trader_id</code></td>
<td>TraderId</td>
<td>"TRADER-001"</td>
<td>äº¤æ˜“å“¡ IDï¼Œæ ¼å¼å¿…é ˆæ˜¯ NAME-TAG</td>
</tr>
<tr>
<td><code>instance_id</code></td>
<td>UUID4</td>
<td>None (è‡ªå‹•)</td>
<td>å¯¦ä¾‹ UUIDï¼Œç”¨æ–¼å€åˆ†å¤šå€‹ä¸¦è¡Œé‹è¡Œçš„å¯¦ä¾‹</td>
</tr>
<tr>
<td><code>load_state</code></td>
<td>bool</td>
<td>False</td>
<td>å•Ÿå‹•æ™‚æ˜¯å¦å¾æ•¸æ“šåº«è¼‰å…¥ç­–ç•¥ç‹€æ…‹</td>
</tr>
<tr>
<td><code>save_state</code></td>
<td>bool</td>
<td>False</td>
<td>åœæ­¢æ™‚æ˜¯å¦å°‡ç­–ç•¥ç‹€æ…‹å­˜å…¥æ•¸æ“šåº«</td>
</tr>
<tr>
<td><code>loop_debug</code></td>
<td>bool</td>
<td>False</td>
<td>asyncio äº‹ä»¶å¾ªç’°æ˜¯å¦é–‹å•Ÿ debug æ¨¡å¼</td>
</tr>
</tbody>
</table>
</div>
<h3>è¶…æ™‚åƒæ•¸ï¼ˆå¯¦ç›¤å¿…èª¿ï¼‰</h3>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>åƒæ•¸</th>
<th>é è¨­å€¼</th>
<th>èªªæ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>timeout_connection</code></td>
<td>120s</td>
<td>ç­‰å¾…æ‰€æœ‰å®¢æˆ¶ç«¯é€£æ¥ä¸¦åˆå§‹åŒ–çš„è¶…æ™‚</td>
</tr>
<tr>
<td><code>timeout_reconciliation</code></td>
<td>30s</td>
<td>ç­‰å¾…åŸ·è¡Œç‹€æ…‹å°å¸³çš„è¶…æ™‚ï¼ˆå¯¦ç›¤å•Ÿå‹•æ™‚å¾ˆé‡è¦ï¼‰</td>
</tr>
<tr>
<td><code>timeout_portfolio</code></td>
<td>10s</td>
<td>ç­‰å¾… Portfolio åˆå§‹åŒ–ä¿è­‰é‡‘å’Œæœªå¯¦ç¾ç›ˆè™§çš„è¶…æ™‚</td>
</tr>
<tr>
<td><code>timeout_disconnection</code></td>
<td>10s</td>
<td>ç­‰å¾…æ‰€æœ‰å®¢æˆ¶ç«¯æ–·é–‹é€£æ¥çš„è¶…æ™‚</td>
</tr>
<tr>
<td><code>timeout_post_stop</code></td>
<td>10s</td>
<td>åœæ­¢å¾Œç­‰å¾…æ®˜ç•™äº‹ä»¶çš„è¶…æ™‚</td>
</tr>
<tr>
<td><code>timeout_shutdown</code></td>
<td>5s</td>
<td>æœ€çµ‚é—œé–‰æ™‚ç­‰å¾…å¾…è™•ç†ä»»å‹™å–æ¶ˆçš„è¶…æ™‚</td>
</tr>
</tbody>
</table>
</div>
<!-- ==================== -->
<h2>å››ã€å­ç³»çµ±é…ç½®è©³è§£</h2>
<h3>4.1 CacheConfig â€” ç·©å­˜é…ç½®</h3>
<pre><code class="language-python">from nautilus_trader.cache.config import CacheConfig

cache_config = CacheConfig(
    database=DatabaseConfig(
        type="redis",
        host="localhost",
        port=6379,
    ),
    timestamps_as_iso8601=True,   # æ™‚é–“æˆ³æ ¼å¼
    buffer_interval_ms=100,       # æ‰¹é‡å¯«å…¥é–“éš”
)</code></pre>
<div class="callout callout-info">
<div class="callout-title">ğŸ’¡ ç‚ºä»€éº¼éœ€è¦ Redis ç·©å­˜ï¼Ÿ</div>
<p><strong>âŒ ä¸ç”¨å¤–éƒ¨ç·©å­˜</strong>ï¼šç¨‹åºå´©æ½°å¾Œæ‰€æœ‰ç‹€æ…‹ä¸Ÿå¤±ï¼Œé‡å•Ÿå¾Œç­–ç•¥ä¸çŸ¥é“è‡ªå·±æœ‰å¤šå°‘æŒå€‰ã€æœ‰å“ªäº›æœªå®Œæˆè¨‚å–®ã€‚</p>
<p><strong>âœ… ç”¨ Redis</strong>ï¼šç‹€æ…‹æŒä¹…åŒ–ï¼Œå´©æ½°é‡å•Ÿå¾Œå¯ä»¥æ¢å¾© â€” è¨­å®š <code>load_state=True</code> å³å¯è‡ªå‹•å¾ Redis è¼‰å…¥ä¹‹å‰çš„ç‹€æ…‹ã€‚
                    </p>
</div>
<h3>4.2 MessageBusConfig â€” æ¶ˆæ¯ç¸½ç·šé…ç½®</h3>
<pre><code class="language-python">from nautilus_trader.common.config import MessageBusConfig

msgbus_config = MessageBusConfig(
    database=DatabaseConfig(
        type="redis",
        host="localhost",
        port=6379,
    ),
    stream_per_topic=True,        # æ¯å€‹ä¸»é¡Œä¸€å€‹ Redis Stream
    autotrim_size=10000,          # æ¯å€‹ Stream æœ€å¤šä¿ç•™ 10000 æ¢æ¶ˆæ¯
    types_filter=[                # åªæŒä¹…åŒ–ç‰¹å®šäº‹ä»¶é¡å‹
        "OrderFilled",
        "PositionChanged",
    ],
)</code></pre>
<h3>4.3 LoggingConfig â€” æ—¥èªŒé…ç½®</h3>
<pre><code class="language-python">from nautilus_trader.common.config import LoggingConfig

logging_config = LoggingConfig(
    log_level="INFO",              # æ§åˆ¶å°æ—¥èªŒç´šåˆ¥
    log_level_file="DEBUG",        # æ–‡ä»¶æ—¥èªŒç´šåˆ¥ï¼ˆæ›´è©³ç´°ï¼‰
    log_directory="./logs",        # æ—¥èªŒæ–‡ä»¶ç›®éŒ„
    log_file_name="nautilus",      # æ—¥èªŒæ–‡ä»¶å
    log_file_format=None,          # æ—¥èªŒæ ¼å¼ï¼ˆNone=é è¨­ï¼‰
    log_colors=True,               # æ§åˆ¶å°å½©è‰²è¼¸å‡º
    log_component_levels={
        # ç‚ºç‰¹å®šçµ„ä»¶è¨­å®šä¸åŒæ—¥èªŒç´šåˆ¥
        "RiskEngine": "WARNING",   # é¢¨æ§å¼•æ“åªè¨˜éŒ„è­¦å‘Šä»¥ä¸Š
        "DataEngine": "INFO",      # æ•¸æ“šå¼•æ“è¨˜éŒ„æ‰€æœ‰ä¿¡æ¯
    },
    bypass_logging=False,          # å®Œå…¨è·³éæ—¥èªŒï¼ˆæ¥µè‡´æ€§èƒ½æ¨¡å¼ï¼‰
)</code></pre>
<div class="callout callout-warning">
<div class="callout-title">âš ï¸ Rust é«˜æ€§èƒ½æ—¥èªŒ</div>
<p>NautilusTrader çš„æ—¥èªŒç³»çµ±<strong>åº•å±¤æ˜¯ Rust å¯¦ç¾çš„</strong>ï¼Œé€™æ˜¯å®ƒèƒ½åœ¨é«˜é »å ´æ™¯ä¸‹é‹è¡Œçš„é—œéµã€‚Python çš„ logging
                        æ¨¡çµ„åœ¨æ¯ç§’æ•¸è¬æ¢æ—¥èªŒæ™‚æœƒé¡¯è‘—æ‹–æ…¢ç³»çµ±ï¼Œä½† Rust æ—¥èªŒå™¨å¹¾ä¹æ²’æœ‰æ€§èƒ½æå¤±ã€‚</p>
</div>
<h3>4.4 LiveDataEngineConfig / LiveExecEngineConfig</h3>
<pre><code class="language-python">from nautilus_trader.live.config import (
    LiveDataEngineConfig,
    LiveExecEngineConfig,
    LiveRiskEngineConfig,
)

data_engine = LiveDataEngineConfig(
    qos=True,                     # æ•¸æ“šå“è³ªä¿è­‰ï¼ˆæª¢æŸ¥é‡è¤‡ã€é †åºï¼‰
)

exec_engine = LiveExecEngineConfig(
    reconciliation=True,          # å•Ÿç”¨è¨‚å–®å°å¸³ï¼ˆå¼·çƒˆå»ºè­°é–‹å•Ÿï¼‰
    inflight_check_interval_ms=2000,  # æª¢æŸ¥ã€Œé£›è¡Œä¸­ã€è¨‚å–®çš„é–“éš”
    inflight_check_threshold_ms=5000, # è¨‚å–®è¶…éæ­¤æ™‚é–“æœªç¢ºèªå‰‡å‘Šè­¦
)

risk_engine = LiveRiskEngineConfig(
    bypass=False,                 # æ˜¯å¦è·³éé¢¨æ§ï¼ˆç”Ÿç”¢ç’°å¢ƒè«‹å‹¿è¨­ Trueï¼ï¼‰
    max_order_submit_rate="100/00:00:01",     # æ¯ç§’æœ€å¤šæäº¤ 100 å–®
    max_order_modify_rate="100/00:00:01",     # æ¯ç§’æœ€å¤šä¿®æ”¹ 100 å–®
)</code></pre>
<!-- ==================== -->
<h2>äº”ã€å®Œæ•´çš„å¯¦ç›¤é…ç½®ç¯„ä¾‹</h2>
<pre><code class="language-python">"""å®Œæ•´çš„ TradingNode é…ç½® â€” ç”Ÿç”¢ç´šåˆ¥"""
from nautilus_trader.live.node import TradingNode
from nautilus_trader.live.config import (
    TradingNodeConfig,
    LiveDataEngineConfig,
    LiveExecEngineConfig,
    LiveRiskEngineConfig,
)
from nautilus_trader.cache.config import CacheConfig
from nautilus_trader.common.config import (
    DatabaseConfig,
    LoggingConfig,
    MessageBusConfig,
)
from nautilus_trader.adapters.binance.config import (
    BinanceLiveDataClientConfig,
    BinanceLiveExecClientConfig,
)

config = TradingNodeConfig(
    trader_id="LIVE-001",

    # === ç·©å­˜ ===
    cache=CacheConfig(
        database=DatabaseConfig(type="redis", host="localhost", port=6379),
    ),

    # === æ¶ˆæ¯ç¸½ç·š ===
    message_bus=MessageBusConfig(
        database=DatabaseConfig(type="redis", host="localhost", port=6379),
        types_filter=["OrderFilled", "PositionChanged"],
    ),

    # === æ—¥èªŒ ===
    logging=LoggingConfig(
        log_level="INFO",
        log_level_file="DEBUG",
        log_directory="./logs",
    ),

    # === å¼•æ“é…ç½® ===
    data_engine=LiveDataEngineConfig(qos=True),
    exec_engine=LiveExecEngineConfig(
        reconciliation=True,
        inflight_check_interval_ms=2000,
    ),
    risk_engine=LiveRiskEngineConfig(
        max_order_submit_rate="50/00:00:01",
    ),

    # === é©é…å™¨ ===
    data_clients={
        "BINANCE": BinanceLiveDataClientConfig(
            api_key="your-key",
            api_secret="your-secret",
            account_type="USDT_FUTURE",
        ),
    },
    exec_clients={
        "BINANCE": BinanceLiveExecClientConfig(
            api_key="your-key",
            api_secret="your-secret",
            account_type="USDT_FUTURE",
        ),
    },

    # === è¶…æ™‚ ===
    timeout_connection=60.0,
    timeout_reconciliation=30.0,

    # === ç‹€æ…‹æŒä¹…åŒ– ===
    load_state=True,
    save_state=True,
)

node = TradingNode(config=config)
node.trader.add_strategy(my_strategy)
node.run()</code></pre>
<!-- ==================== -->
<h2>å…­ã€å›æ¸¬ vs å¯¦ç›¤ é…ç½®å°æ¯”</h2>
<div class="table-wrapper">
<table>
<thead>
<tr>
<th>é …ç›®</th>
<th>BacktestEngineConfig</th>
<th>TradingNodeConfig</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ç’°å¢ƒ</strong></td>
<td>BACKTEST</td>
<td>LIVE / SANDBOX</td>
</tr>
<tr>
<td><strong>æ•¸æ“šæº</strong></td>
<td>BacktestDataConfig (Catalog)</td>
<td>LiveDataClientConfig (é©é…å™¨)</td>
</tr>
<tr>
<td><strong>äº¤æ˜“æ‰€</strong></td>
<td>BacktestVenueConfig (æ¨¡æ“¬)</td>
<td>LiveExecClientConfig (çœŸå¯¦)</td>
</tr>
<tr>
<td><strong>å¼•æ“</strong></td>
<td>DataEngineConfig</td>
<td>LiveDataEngineConfig (å¤šäº† qos ç­‰)</td>
</tr>
<tr>
<td><strong>Redis</strong></td>
<td>é€šå¸¸ä¸éœ€è¦</td>
<td>å¼·çƒˆå»ºè­°ï¼ˆç‹€æ…‹æŒä¹…åŒ–ï¼‰</td>
</tr>
<tr>
<td><strong>å°å¸³</strong></td>
<td>ä¸éœ€è¦</td>
<td>reconciliation=True</td>
</tr>
<tr>
<td><strong>ç­–ç•¥ä»£ç¢¼</strong></td>
<td colspan="2" style="text-align:center;">âœ… å®Œå…¨ä¸è®Š</td>
</tr>
</tbody>
</table>
</div>
<!-- ==================== -->
<h2>ä¸ƒã€StreamingConfig â€” ä¸²æµæ•¸æ“šå°å‡º</h2>
<pre><code class="language-python">from nautilus_trader.common.config import StreamingConfig

streaming = StreamingConfig(
    catalog_path="./catalog",    # è‡ªå‹•å­˜å…¥ DataCatalog
    fs_protocol="file",          # æ–‡ä»¶ç³»çµ±å”è­°
    include_types=[              # åªå­˜é€™äº›æ•¸æ“šé¡å‹
        "OrderFilled",
        "PositionChanged",
        "Bar",
    ],
)

# åœ¨ TradingNodeConfig ä¸­ä½¿ç”¨
config = TradingNodeConfig(
    streaming=streaming,
    # ... å…¶ä»–é…ç½®
)</code></pre>
<p>é€™æ¨£åœ¨å¯¦ç›¤é‹è¡Œæ™‚ï¼ŒæŒ‡å®šçš„äº‹ä»¶å’Œæ•¸æ“šæœƒ<strong>è‡ªå‹•å¯«å…¥ Parquet</strong>ï¼Œå›é ­å°±èƒ½ç”¨ DataCatalog åšé›¢ç·šåˆ†æã€‚</p>
<!-- ==================== -->
<h2>å…«ã€äº’å‹•ç·´ç¿’</h2>
<div class="exercise-block">
<div class="exercise-title">ğŸ§  ç·´ç¿’ 1ï¼šé…ç½®åƒæ•¸é¸æ“‡</div>
<p>ä½ çš„ç­–ç•¥é€£æ¥ Binance äº¤æ˜“æ‰€ï¼Œä½†å•Ÿå‹•æ™‚ç¶“å¸¸è¶…æ™‚ã€‚ä½ æ‡‰è©²èª¿æ•´å“ªå€‹è¶…æ™‚åƒæ•¸ï¼Ÿ</p>
<button class="btn-run" onclick="toggleAnswer('answer-timeout')">ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</button>
<div class="exercise-output" id="answer-timeout">
<p>èª¿æ•´ <code>timeout_connection</code>ï¼ˆé è¨­ 120sï¼‰</p>
<p><strong>å¦‚æœ 120s é‚„ä¸å¤ ï¼Œå¯èƒ½åŸå› ï¼š</strong></p>
<ol>
<li>ç¶²è·¯å»¶é²é«˜ â†’ å¢åŠ åˆ° 180s æˆ– 300s</li>
<li>è¨‚é–±çš„å“ç¨®å¤ªå¤š â†’ é©é…å™¨éœ€è¦æ›´å¤šæ™‚é–“åˆå§‹åŒ–</li>
<li>Binance API é™é€Ÿ â†’ é™ä½åˆå§‹è¨‚é–±é‡</li>
</ol>
<p><strong>å¦å¤–è¦æª¢æŸ¥ï¼š</strong></p>
<ul>
<li><code>timeout_reconciliation</code>ï¼ˆå°å¸³è¶…æ™‚ï¼‰</li>
<li><code>timeout_portfolio</code>ï¼ˆPortfolio åˆå§‹åŒ–è¶…æ™‚ï¼‰</li>
</ul>
<div class="callout callout-info" style="margin:0;">
<div class="callout-title">ğŸ’¡ ç¸½çµ</div>
<p style="margin-bottom:0;">å¦‚æœåªæ˜¯å¶çˆ¾è¶…æ™‚ï¼Œå„ªå…ˆå¢åŠ 
                                <code>timeout_connection</code><br/>å¦‚æœç¶“å¸¸è¶…æ™‚ï¼Œéœ€è¦æª¢æŸ¥ç¶²è·¯å’Œè¨‚é–±é‚è¼¯</p>
</div>
</div>
</div>
<div class="exercise-block">
<div class="exercise-title">ğŸ§  ç·´ç¿’ 2ï¼šRedis é…ç½®æ±ºç­–</div>
<p>ä»¥ä¸‹å ´æ™¯ï¼Œä½ æ˜¯å¦éœ€è¦é…ç½® Redisï¼Ÿç‚ºä»€éº¼ï¼Ÿ</p>
<ol>
<li>åªåšæ­·å²å›æ¸¬</li>
<li>å¯¦ç›¤é‹è¡Œä¸€å€‹ç­–ç•¥ï¼Œç™½å¤©æ‰‹å‹•é‡å•Ÿ</li>
<li>7x24 è‡ªå‹•åŒ–é‹è¡Œå¤šå€‹ç­–ç•¥</li>
</ol>
<button class="btn-run" onclick="toggleAnswer('answer-redis')">ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</button>
<div class="exercise-output" id="answer-redis">
<ol>
<li><strong>åªåšå›æ¸¬ â†’ âŒ ä¸éœ€è¦</strong><br/>
                                å›æ¸¬æ˜¯ä¸€æ¬¡æ€§é‹è¡Œï¼Œä¸éœ€è¦ç‹€æ…‹æŒä¹…åŒ–
                            </li>
<li style="margin-top:0.8rem;"><strong>ç™½å¤©æ‰‹å‹•é‡å•Ÿ â†’ âš ï¸ å»ºè­°é…ç½®</strong><br/>
                                é‡å•Ÿå¾Œéœ€è¦çŸ¥é“æœ‰å“ªäº›æœªå®Œæˆè¨‚å–®å’ŒæŒå€‰<br/>
                                è¨­å®š <code>load_state=True</code>, <code>save_state=True</code>
</li>
<li style="margin-top:0.8rem;"><strong>7x24 è‡ªå‹•åŒ– â†’ âœ… å¿…é ˆé…ç½®</strong>
<ul>
<li><code>CacheConfig</code> ç”¨ Redis å­˜ç‹€æ…‹</li>
<li><code>MessageBusConfig</code> ç”¨ Redis å­˜äº‹ä»¶æµ</li>
<li>å´©æ½°é‡å•Ÿå¾Œè‡ªå‹•æ¢å¾©</li>
<li>æ”¯æŒå¤šå¯¦ä¾‹åˆ†ææ­·å²äº‹ä»¶</li>
</ul>
</li>
</ol>
</div>
</div>
<div class="exercise-block">
<div class="exercise-title">ğŸ§  ç·´ç¿’ 3ï¼šæ‰¾å‡ºé…ç½®éŒ¯èª¤</div>
<p>ä»¥ä¸‹ç”Ÿç”¢é…ç½®æœ‰ 3 å€‹é¢¨éšªï¼Œæ‰¾å‡ºä¾†ï¼š</p>
<pre><code class="language-python">config = TradingNodeConfig(
    trader_id="LIVE-001",
    risk_engine=LiveRiskEngineConfig(
        bypass=True,                          # (1)
    ),
    exec_engine=LiveExecEngineConfig(
        reconciliation=False,                 # (2)
    ),
    logging=LoggingConfig(
        bypass_logging=True,                  # (3)
    ),
    load_state=False,
    save_state=False,
)</code></pre>
<button class="btn-run" onclick="toggleAnswer('answer-find-bug')">ğŸ’¡ æŸ¥çœ‹ç­”æ¡ˆ</button>
<div class="exercise-output" id="answer-find-bug">
<p><strong>ä¸‰å€‹åš´é‡é¢¨éšªï¼š</strong></p>
<ol>
<li><strong><code>bypass=True</code> â†’ ğŸ”´ å®Œå…¨è·³éé¢¨æ§ï¼</strong><br/>
                                ç”Ÿç”¢ç’°å¢ƒçµ•ä¸èƒ½è·³éé¢¨æ§ï¼Œä¸€å€‹ bug å¯èƒ½å°è‡´ç„¡é™ä¸‹å–®<br/>
                                âœ… ä¿®æ­£ï¼š<code>bypass=False</code>
</li>
<li style="margin-top:0.8rem;"><strong><code>reconciliation=False</code> â†’ ğŸ”´
                                    ä¸å°å¸³ï¼</strong><br/>
                                é‡å•Ÿå¾Œæœ¬åœ°è¨‚å–®ç‹€æ…‹å’Œäº¤æ˜“æ‰€ä¸ä¸€è‡´<br/>
                                å¯èƒ½å°è‡´é‡è¤‡ä¸‹å–®æˆ–éºå¤±æŒå€‰è¿½è¹¤<br/>
                                âœ… ä¿®æ­£ï¼š<code>reconciliation=True</code>
</li>
<li style="margin-top:0.8rem;"><strong><code>bypass_logging=True</code> â†’ ğŸŸ 
                                    å®Œå…¨æ²’æœ‰æ—¥èªŒï¼</strong><br/>
                                å‡ºå•é¡Œæ™‚ç„¡æ³•æ’æŸ¥åŸå› <br/>
                                âœ… ä¿®æ­£ï¼š<code>bypass_logging=False</code>ï¼Œæ­é…åˆé©çš„ <code>log_level</code>
</li>
</ol>
</div>
</div>
<h2>ä¹ã€æœ¬æ¨¡çµ„é‡é»å›é¡§</h2>
<div class="card">
<div class="card-title">ğŸ“‹ é—œéµé»</div>
<ol>
<li><strong>æ¨¹ç‹€é…ç½®</strong>ï¼šTradingNodeConfig åŒ…å«æ‰€æœ‰å­ç³»çµ±é…ç½®ï¼ˆCacheã€MessageBusã€å¼•æ“ã€æ—¥èªŒï¼‰</li>
<li><strong>Frozen ä¸å¯è®Š</strong>ï¼šæ‰€æœ‰ Config éƒ½æ˜¯ frozenï¼Œé‹è¡ŒæœŸé–“åƒæ•¸ä¸èƒ½è¢«ä¿®æ”¹</li>
<li><strong>Redis æŒä¹…åŒ–</strong>ï¼šCache å’Œ MessageBus å¯é…ç½® Redisï¼Œå¯¦ç¾ç‹€æ…‹æ¢å¾©å’Œäº‹ä»¶æµå­˜å„²</li>
<li><strong>Rust æ—¥èªŒ</strong>ï¼šåº•å±¤ Rust å¯¦ç¾ï¼Œæ”¯æŒçµ„ä»¶ç´šæ—¥èªŒç´šåˆ¥æ§åˆ¶</li>
<li><strong>è¶…æ™‚åƒæ•¸</strong>ï¼š6 å€‹è¶…æ™‚åƒæ•¸æ§åˆ¶ç³»çµ±å•Ÿå‹•/é—œé–‰æµç¨‹</li>
<li><strong>StreamingConfig</strong>ï¼šå¯¦ç›¤æ•¸æ“šè‡ªå‹•å¯«å…¥ Parquetï¼Œäº‹å¾Œå¯åšé›¢ç·šåˆ†æ</li>
</ol>
</div>
<div class="page-nav">
<a href="../Module_13_Adapters_Extensions/index.html"><span class="nav-label">â† ä¸Šä¸€ç« </span><span class="nav-title">æ¨¡çµ„ 13ï¼šé©é…å™¨èˆ‡æ“´å±•</span></a>
<a href="../Module_15_Live_Advanced/index.html" style="text-align:right;"><span class="nav-label">ä¸‹ä¸€ç«  â†’</span><span class="nav-title">æ¨¡çµ„ 15ï¼šå¯¦ç›¤éƒ¨ç½²é€²éš</span></a>
</div>
</div>
</div>
</div>
<button aria-label="å›åˆ°é ‚éƒ¨" class="back-to-top">â†‘</button>
<script src="../assets/lecture.js"></script>
</body>
</html>